<!DOCTYPE html> <html lang="ru"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Маршрут 2. Дневной яхтенный тур с обедом на яхте.</title> <style> /* Начало блока для написания CSS-стилей */
        body { /* Стили для всего тела документа */
            margin: 0; /* Убираем стандартные внешние отступы у body */
            overflow: hidden; /* Скрываем любой контент, который выходит за пределы экрана (важно для режима "Истории") */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; /* Набор системных шрифтов для кросс-платформенной совместимости */
            display: flex; /* Используем Flexbox-модель для расположения дочерних элементов */
            flex-direction: column; /* Располагаем дочерние элементы в колонку (вертикально) */
            height: 100vh; /* Задаем высоту тела равной 100% высоты видимой части окна браузера (viewport height) */
            height: 100svh; /* Более новый стандарт (small viewport height), который лучше работает на мобильных устройствах, учитывая панели браузера */
        }
        .content-view { /* Общий класс для основных контейнеров контента (обложка и книга) */
            flex-grow: 1; /* Разрешаем элементу занимать всё доступное свободное пространство по вертикали */
            position: relative; /* Устанавливаем относительное позиционирование, чтобы дочерние абсолютные элементы позиционировались относительно него */
            display: none; /* По умолчанию скрываем эти блоки */
            background-color: #000; /* Цвет фона - черный */
        }
        #cover-view.content-view { display: flex; } /* Контейнер обложки (#cover-view) делаем видимым при загрузке, используя display: flex для центрирования контента */
        #cover-video { /* Стили для фонового видео на обложке */
            position: absolute; /* Абсолютное позиционирование относительно родительского .content-view */
            top: 0; left: 0; /* Прижимаем видео к верхнему левому углу родителя */
            width: 100%; height: 100%; /* Растягиваем видео на всю ширину и высоту родителя */
            z-index: 1; /* Помещаем видео на первый слой (ниже текста и кнопок) */
            object-fit: cover; /* Масштабируем видео так, чтобы оно полностью покрывало контейнер, обрезая лишнее */
        }
        .cover-text-box { /* Контейнер для текста на обложке */
            position: absolute; /* Абсолютное позиционирование */
            z-index: 2; /* Помещаем текст выше видео (z-index: 1) */
            text-shadow: 2px 2px 5px rgba(8, 0, 0, 0.8); /* Тень для текста для лучшей читаемости на видео-фоне */
            font-size: 1.1em; /* Немного увеличиваем размер шрифта */
            max-width: 90%; /* Ограничиваем максимальную ширину, чтобы текст не прилипал к краям экрана */
            text-align: center; /* Выравниваем текст по центру */
            transform: translate(-50%, -50%); /* Техника для точного центрирования блока (сдвигаем на 50% своей ширины и высоты) */
            display: flex; /* Используем flex для внутреннего выравнивания */
            align-items: center; /* Выравниваем дочерние элементы по вертикали */
            justify-content: center; /* Выравниваем дочерние элементы по горизонтали */
            gap: 10px; /* Расстояние между дочерними элементами */
            transition: opacity 0.5s; /* Плавный переход для свойства прозрачности */
        }
        .cover-text-bg { /* Стили для подложки под текстом на обложке */
            background-color: rgba(0, 0, 0, 0.5); /* Полупрозрачный черный фон */
            padding: 5px 10px; /* Внутренние отступы для текста */
            color: rgb(246, 238, 238); /* Светлый цвет текста */
            white-space: nowrap; /* Запрещаем перенос текста на новую строку */
        }
        #tooltip-box { /* Стили для всплывающей подсказки */
            position: fixed; /* Фиксированное позиционирование относительно окна браузера */
            z-index: 10001; /* Очень высокий z-index, чтобы подсказка была поверх всех элементов */
            background-color: rgba(0, 0, 0, 0.8); /* Полупрозрачный фон */
            color: white; /* Белый цвет текста */
            padding: 8px 12px; /* Внутренние отступы */
            border-radius: 8px; /* Скругление углов */
            font-size: 0.9em; /* Немного уменьшенный шрифт */
            max-width: 250px; /* Максимальная ширина подсказки */
            text-align: center; /* Выравнивание текста по центру */
            opacity: 0; /* Изначально полностью прозрачна (скрыта) */
            visibility: hidden; /* Изначально скрыта и не участвует в событиях */
            transition: opacity 0.3s, visibility 0.3s, transform 0.3s; /* Плавные переходы для появления/исчезновения */
            pointer-events: none; /* Подсказка не перехватывает клики мыши */
        }
        #tooltip-box.visible { opacity: 1; visibility: visible; } /* Класс для отображения подсказки */
        .cover-button { /* Общий стиль для круглых кнопок на обложке */
            position: absolute; /* Абсолютное позиционирование */
            z-index: 3; /* Помещаем кнопки поверх текста и видео */
            width: 50px; /* Ширина кнопки */
            height: 50px; /* Высота кнопки */
            border-radius: 50%; /* Делаем кнопку идеально круглой */
            display: flex; /* Используем flex для центрирования иконки внутри */
            align-items: center; /* Вертикальное центрирование */
            justify-content: center; /* Горизонтальное центрирование */
            background-color: rgba(0, 0, 0, 0.5); /* Полупрозрачный фон */
            border: 2px solid white; /* Белая рамка */
            cursor: pointer; /* Указатель мыши в виде руки */
            transition: transform 0.2s, background-color 0.2s; /* Плавные переходы для эффектов */
            transform: translate(-50%, -50%); /* Центрирование кнопки */
        }
        .cover-button:hover { /* Эффект при наведении на кнопку */
            transform: translate(-50%, -50%) scale(1.1); /* Немного увеличиваем кнопку */
            background-color: rgba(0, 0, 0, 0.7); /* Делаем фон темнее */
        }
        .cover-button.route-selector-btn { /* Стиль для прямоугольной кнопки выбора маршрутов */
            width: 90px; /* Задаем ширину */
            height: 40px; /* Задаем высоту */
            border-radius: 8px; /* Делаем углы скругленными */
        }
        .cover-button svg { width: 28px; height: 28px; fill: white; } /* Стили для SVG иконок внутри кнопок */
        .pulsing { /* Класс для создания эффекта пульсации */
            animation-name: pulseAnimation; /* Название анимации */
            animation-iteration-count: infinite; /* Бесконечное повторение анимации */
            animation-timing-function: ease-in-out; /* Плавность хода анимации */
            animation-duration: var(--pulse-total-duration, 8s); /* Длительность одного цикла анимации (берется из JS переменной) */
        }
        .cover-button.route-selector-btn svg { /* Стили для SVG внутри кнопки выбора маршрута */
            width: 100%; /* Растягиваем SVG на всю ширину кнопки */
            height: 100%; /* Растягиваем SVG на всю высоту кнопки */
            fill: initial; /* Сбрасываем цвет заливки, чтобы он наследовался из SVG-кода */
        }
        @keyframes pulseAnimation { /* Определение самой анимации пульсации */
            0% { opacity: 0; } /* Начало: невидимый */
            6.25% { opacity: 1; } /* Плавное появление */
            56.25% { opacity: 1; } /* Остается видимым */
            81.25% { opacity: 0; } /* Плавное исчезновение */
            100% { opacity: 0; } /* Конец: невидимый */
        }
        
        .route-dropdown-menu { /* Стили для выпадающего меню */
            position: fixed; /* Фиксированное позиционирование */
            z-index: 10000;  /* Высокий z-index, чтобы быть поверх других элементов */
            background-color: white; /* Белый фон */
            border-radius: 8px; /* Скругленные углы */
            box-shadow: 0 5px 20px rgba(0,0,0,0.3); /* Тень для эффекта объема */
            padding: 8px; /* Внутренние отступы */
            min-width: 200px; /* Минимальная ширина меню */
            opacity: 0; /* Изначально невидимо */
            visibility: hidden; /* Изначально скрыто */
            transition: opacity 0.2s, transform 0.2s, visibility 0.2s; /* Плавные переходы */
        }
        .route-dropdown-menu.visible { /* Класс для отображения меню */
            opacity: 1; /* Делаем видимым */
            visibility: visible; /* Делаем доступным */
        }
        .route-dropdown-menu a { /* Стили для ссылок внутри меню */
            display: block; /* Делаем ссылки блочными элементами, чтобы занимали всю ширину */
            padding: 10px 15px; /* Внутренние отступы */
            color: #333; /* Темный цвет текста */
            text-decoration: none; /* Убираем подчеркивание */
            border-radius: 6px; /* Скругление углов для каждого пункта */
            transition: background-color 0.2s; /* Плавный переход фона */
            cursor: pointer; /* Указатель в виде руки */
        }
        .route-dropdown-menu a:hover { /* Эффект при наведении на пункт меню */
            background-color: #f0f0f0; /* Слегка серый фон */
        }

        .page { /* Стили для отдельной "страницы" контента в режиме "Истории" */
            position: absolute; width: 100%; height: 100%; /* Абсолютное позиционирование на весь родительский блок */
            display: flex; flex-direction: column; align-items: center; /* Flex-контейнер для внутреннего контента */
            padding: 20px; box-sizing: border-box; /* Внутренние отступы, box-sizing для правильного расчета размеров */
            opacity: 0; visibility: hidden; transition: opacity 0.5s ease-in-out, height 0.3s ease-in-out; /* Плавное появление/исчезновение страницы */
            background: white; /* Белый фон */
            position: relative; 
        }
        .page.active { opacity: 1; visibility: visible; } /* Класс для активной (видимой) страницы */
        .page p { /* Стили для текстового блока на странице */
            margin-top: 15px; text-align: left; font-size: 1.1em; line-height: 1.6; /* Настройки текста */
            color: #333; /* Темный цвет текста */
            overflow-y: auto; /* Добавляем вертикальную прокрутку, если текст не помещается */
            width: 100%; /* Ширина на 100% родителя */
            padding-right: 10px; /* Небольшой отступ справа для полосы прокрутки */
            flex-grow: 1; /* Занимает все доступное вертикальное пространство */
            min-height: 0; /* Хак для корректной работы flex-grow и overflow-y */
            box-sizing: border-box; /* Включаем padding в расчет ширины */
        }
        .page-buttons-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 15px; flex-shrink: 0; } /* Контейнер для кнопок (видео, фото и т.д.) */
        .page-btn { color: white; border: none; border-radius: 8px; padding: 10px 20px; font-size: 1em; cursor: pointer; transition: background-color 0.3s; } /* Общий стиль для кнопок на странице */
        .page-btn.video-btn, .page-btn.iframe-btn { background-color: #4285F4; } /* Синий цвет для кнопок видео и iframe */
        .page-btn.audio-btn { background-color: #f4b400; } /* Желтый цвет для кнопок аудио */
        .page-btn.photo-btn { background-color: #0F9D58; } /* Зеленый цвет для кнопок фото */
        .page-btn.text-btn { background-color: #673ab7; } /* Фиолетовый цвет для текстовых кнопок */
        .page-btn.carousel-btn { background-color: #9c27b0; } /* Пурпурный для фото-карусели */
        .page-btn:hover { filter: brightness(90%); } /* Затемнение кнопки при наведении */
        .page-btn.admin-error-btn { background-color: #db4437; cursor: not-allowed; border: 2px dashed white; font-weight: bold; } /* Стиль для кнопки-ошибки в админ-режиме */
        .link-btn { /* Стиль для особой кнопки-ссылки (не используется в текущей конфигурации, но присутствует) */
            position: absolute; /* Абсолютное позиционирование */
            z-index: 5; /* Слой над другими элементами */
            padding: 12px 24px; font-size: 1em; font-weight: 600; /* Настройки текста и отступов */
            color: white; /* Белый цвет текста */
            background: linear-gradient(45deg, #6a11cb 0%, #2575fc 100%); /* Градиентный фон */
            border: none; /* Без рамки */
            border-radius: 8px; /* Скругленные углы */
            left: 50%; top: 85%; /* Положение */
            transform: translate(-50%, -50%); /* Центрирование */
        }
        .link-btn:hover { transform: translate(-50%, -50%) scale(1.05); box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3); } /* Эффект при наведении */
        .modal { /* Стили для модального (всплывающего) окна */
            display: none; /* Изначально скрыто */
            position: fixed; /* Фиксированное позиционирование на весь экран */
            z-index: 1000; /* Высокий z-index */
            left: 0; top: 0; width: 100%; height: 100%; /* Размеры на весь экран */
            background-color: rgba(0, 0, 0, 0.8); /* Полупрозрачный черный фон (затемнение) */
            justify-content: center; align-items: center; /* Центрирование содержимого */
            flex-direction: column; /* Располагаем элементы в колонку */
        }
        .modal-content { display: none; max-width: 90%; max-height: 80%; width: auto; height: auto; border-radius: 4px; } /* Общий класс для контента внутри модального окна */
        #modalIframe { /* Стили для iframe внутри модального окна */
            display: block; /* Делаем блочным элементом */
            background-color: #000; /* Черный фон на случай долгой загрузки */
            border-radius: 8px; /* Скругленные углы */
            max-width: 95vw; /* Максимальная ширина 95% от ширины экрана */
            max-height: 90vh; /* Максимальная высота 90% от высоты экрана */
        }
        #modalText { background-color: #fff; padding: 25px; color: #333; overflow-y: auto; line-height: 1.6; } /* Стили для текстового контента в модальном окне */
        .modal-close { position: absolute; top: 20px; right: 35px; color: #f1f1f1; font-size: 40px; font-weight: bold; cursor: pointer; z-index: 1001; } /* Стили для кнопки "закрыть" (крестик) */
        .modal-header, .modal-footer { color: white; text-align: center; padding: 5px 15px; max-width: 90%; box-sizing: border-box; font-size: clamp(0.8rem, 2vw, 1.1em); } /* Стили для заголовка и подвала в модальном окне */
        #iframe-wrapper { position: relative; width: 95%; max-width: 700px; background-color: #ffffff; border-radius: 8px; padding: 15px; box-sizing: border-box; transition: height 0.3s ease; } /* Обертка для iframe формы бронирования */
        #bookingFrame { width: 100%; height: 100%; border: none; } /* Стили для самого iframe формы бронирования */
        #admin-panel { position: fixed; bottom: 10px; left: 10px; z-index: 9999; background-color: rgba(255, 221, 221, 0.95); border: 2px solid #db4437; border-radius: 8px; padding: 15px; max-width: 400px; } /* Стили для панели с ошибками в админ-режиме */
        #admin-panel h4 { margin: 0 0 10px 0; color: #b71c1c; } /* Заголовок в админ-панели */
        #admin-panel ul { margin: 0; padding-left: 20px; } /* Список в админ-панели */
        #admin-panel li { margin-bottom: 5px; } /* Элемент списка в админ-панели */
        .controls { /* Стили для нижней панели управления */
            flex-shrink: 0; /* Запрещаем панели сжиматься */
            display: flex; /* Flexbox для дочерних элементов */
            flex-direction: column; /* Элементы в колонку */
            justify-content: center; /* Вертикальное центрирование */
            align-items: center; /* Горизонтальное центрирование */
            padding: 10px 15px; /* Внутренние отступы */
            background: #f1f1f1; /* Светло-серый фон */
            border-top: 1px solid #ddd; /* Верхняя рамка для отделения */
            box-sizing: border-box; /* Правильный расчет размеров */
        }
        .controls-label { /* Стиль для заголовка на панели управления */
            color: #555; /* Темно-серый цвет текста */
            margin-bottom: 8px; /* Отступ снизу */
            font-weight: bold; /* Жирный шрифт */
            text-align: center; /* Выравнивание по центру */
            font-size: clamp(1.2rem, 2.5vw, 1.4em); /* Адаптивный размер шрифта */
            max-width: 100%; /* Максимальная ширина */
            word-break: break-word; overflow-wrap: break-word; hyphens: auto; /* Настройки для переноса длинных слов */
            min-width: 0; /* Хак для корректной работы flex */
        }
        .controls-buttons { /* Контейнер для кнопок на панели управления */
            display: flex; /* Flexbox */
            justify-content: center; align-items: center; /* Центрирование */
            width: 100%; /* Ширина на 100% */
            gap: clamp(10px, 3vw, 25px); /* Адаптивное расстояние между кнопками */
            flex-wrap: wrap; /* Разрешаем перенос кнопок на новую строку */
        }
        .button-wrapper { display: flex; flex-direction: column; align-items: center; gap: 4px; } /* Обертка для кнопки и её подписи */
        .button-label { font-size: clamp(1.0rem, 1.8vw, 1.2rem); color: #555; text-align: center; line-height: 1.3; } /* Стиль для подписи под кнопкой */
        .controls button { color: white; border: none; border-radius: 50%; cursor: pointer; display: flex; justify-content: center; align-items: center; transition: background-color 0.3s, transform 0.3s; } /* Общий стиль для кнопок на панели */
        .controls button:hover { transform: scale(1.1); } /* Увеличение при наведении */
        #playPauseBtn { background: #4285F4; width: 40px; height: 40px; font-size: 20px; } /* Кнопка Play/Pause */
        .nav-btn { background: #757575; width: 40px; height: 40px; font-size: 20px; } /* Кнопки навигации (вперед/назад) */
        #bookingBtn { background: #4CAF50; width: 40px; height: 40px; font-size: 20px; } /* Кнопка бронирования */
        #pageIndicator { font-size: 1.2em; font-weight: bold; color: #333; min-width: 50px; text-align: center; } /* Индикатор номера страницы */

        #modalCarousel { /* Стили для модального окна с фото-каруселью */
            display: flex; /* Flexbox */
            flex-direction: row; /* Элементы в строку */
            justify-content: space-between; /* Распределение элементов */
            align-items: center; /* Вертикальное выравнивание */
            width: 95%; max-width: 1280px; height: 90%; /* Размеры */
            gap: 15px; /* Расстояние между элементами */
        }
        #carouselIframeWrapper { /* Обертка для iframe внутри карусели */
            flex-grow: 1; /* Занимает все доступное пространство */
            width: 100%; height: 100%; /* Размеры */
            display: flex; justify-content: center; align-items: center; /* Центрирование iframe */
            overflow: hidden; /* Скрытие частей iframe, выходящих за границы */
            position: relative; z-index: 1; /* Позиционирование */
        }
        #carouselIframe { /* Сам iframe в карусели */
            flex-shrink: 0; /* Запрет на сжатие */
            border: none; border-radius: 8px; /* Стили рамки */
            transition: transform 0.3s ease; /* Плавный переход для масштабирования */
            transform-origin: center center; /* Точка трансформации в центре */
        }
        .carousel-nav { /* Кнопки "вперед/назад" в карусели */
            flex-shrink: 0; /* Запрет на сжатие */
            background: rgba(0,0,0,0.5); /* Полупрозрачный фон */
            border: none; color: white; /* Стили рамки и текста */
            font-size: 3em; cursor: pointer; /* Настройки текста и курсора */
            padding: 0 20px; border-radius: 8px; /* Отступы и скругление */
            user-select: none; /* Запрет на выделение текста */
            height: 80%; position: relative; z-index: 2; /* Размеры и позиционирование */
        }
        .carousel-nav:hover { background: rgba(0,0,0,0.8); } /* Затемнение при наведении */
        @media (max-width: 768px) { /* Медиа-запрос для мобильных устройств */
            #modalCarousel { /* Перестраиваем карусель на мобильных */
                flex-direction: row; /* Элементы в строку */
                flex-wrap: wrap; /* С переносом */
                justify-content: center; /* Центрирование */
                align-items: center; /* Центрирование */
                gap: 15px; /* Промежуток */
            }
        
            #carouselIframeWrapper { /* Обертка iframe на мобильных */
                order: 1; /* Порядок отображения: сначала iframe */
                width: 100%; /* Ширина на 100% */
                height: 80%; /* Высота 80% */
            }
        
            #modalCarousel .carousel-nav.prev, /* Кнопки навигации на мобильных */
            #modalCarousel .carousel-nav.next {
                order: 2; /* Порядок отображения: после iframe */
                font-size: 2em; /* Уменьшаем шрифт */
                background: rgba(0, 0, 0, 0.5); /* Фон */
                border-radius: 50%; /* Делаем круглыми */
                height: 45px; width: 45px; /* Размеры */
                padding: 0; /* Убираем отступы */
                display: flex; align-items: center; justify-content: center; /* Центрирование иконки */
                margin-top: 5px; /* Отступ сверху */
            }
        }

        /* ----- СТИЛИ ДЛЯ РЕЖИМА "ЛЕНТЫ" (FEED MODE) ----- */
        .feed-mode { /* Класс, который добавляется к body для активации режима ленты */
            height: auto; /* Высота определяется контентом */
            overflow-y: auto; /* Включаем вертикальную прокрутку */
            overflow-x: hidden; /* Выключаем горизонтальную */
        }
        .feed-mode .content-view { /* Блоки контента в режиме ленты */
            display: block !important; /* Делаем их видимыми и блочными */
            position: relative; /* Обычное относительное позиционирование */
            height: auto; /* Высота по контенту */
        }
        .feed-mode #cover-view { /* Обложка в режиме ленты */
            height: 100vh; /* Занимает первый экран */
            height: 100svh; /* Аналог для мобильных */
        }
        .feed-mode .page { /* "Страницы" в режиме ленты */
            position: relative; /* Обычное позиционирование */
            opacity: 1 !important; visibility: visible !important; /* Делаем их всегда видимыми */
            margin-bottom: 10px; /* Отступ между блоками */
            height: auto;  /* Высота по контенту */
        }
        .feed-mode .page details { /* Элемент <details> для создания раскрывающихся блоков */
            width: 100%; /* Ширина на 100% */
            border: 1px solid #e0e0e0; /* Светлая рамка */
            border-radius: 8px; /* Скругление углов */
            box-sizing: border-box; /* Правильный расчет размеров */
        }
        .feed-mode .page details[open] { /* Стили для раскрытого блока */
            min-height: 80vh; /* Минимальная высота, чтобы занимал почти весь экран */
            padding-bottom: 80px; /* Отступ снизу, чтобы контент не перекрывался панелью управления */
        }
        .feed-mode .controls { /* Панель управления в режиме ленты */
            position: sticky; /* "Прилипает" к низу экрана при прокрутке */
            bottom: 0; /* Расположение внизу */
            z-index: 1000; /* Поверх контента */
            width: 100%; /* Ширина на 100% */
        }
        .feed-mode .page summary { /* Заголовок раскрывающегося блока */
            padding: 15px; /* Внутренние отступы */
            background-color: #f1f1f1; /* Светло-серый фон */
            border-radius: 8px; /* Скругление углов */
            font-weight: bold; font-size: 1.1em; /* Настройки шрифта */
            cursor: pointer; /* Курсор-рука */
            transition: background-color 0.2s; /* Плавный переход фона */
            list-style: none; /* Убираем стандартный маркер-стрелку */
            position: relative; /* Относительное позиционирование для псевдо-элемента */
        }
        .feed-mode .page summary:hover { /* Эффект при наведении на заголовок */
            background-color: #e0e0e0; /* Затемнение фона */
        }
        .feed-mode .page summary::before { /* Псевдо-элемент для создания своей стрелки */
            content: '▼'; /* Символ стрелки */
            position: absolute; /* Абсолютное позиционирование */
            right: 20px; /* Справа */
            transition: transform 0.2s; /* Плавный переход для поворота */
        }
        .feed-mode .page details:not([open]) > summary::before { /* Когда блок закрыт */
            transform: rotate(-90deg); /* Поворачиваем стрелку */
        }
        .feed-mode .page details > .page-buttons-container { /* Контейнер кнопок внутри раскрытого блока */
            margin-top: 20px; /* Отступ сверху */
        }

        /* <<< НАЧАЛО ИЗМЕНЕНИЙ: Стили для встраиваемого медиа-контента >>> */
        .embedded-media { /* Общий класс для всех встраиваемых элементов (img, video, iframe) */
            max-width: 100%; /* Элемент не будет выходить за границы родительского текстового блока */
            height: auto;   /* Высота подстраивается автоматически для сохранения пропорций */
            display: block; /* Отображается как блочный элемент */
            margin: 15px auto; /* Вертикальный отступ 15px, горизонтально центрируется */
            border-radius: 8px; /* Скругленные углы */
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); /* Легкая тень для объема */
        }
        .embedded-media.align-left { /* Класс для обтекания текста справа */
            float: left; /* Прижимаем элемент влево */
            margin-right: 15px; /* Отступ справа от текста */
            margin-left: 0; /* Убираем авто-отступ слева */
        }
        .embedded-media.align-right { /* Класс для обтекания текста слева */
            float: right; /* Прижимаем элемент вправо */
            margin-left: 15px; /* Отступ слева от текста */
            margin-right: 0; /* Убираем авто-отступ справа */
        }
        .embedded-media.size-small { width: 30%; max-width: 200px; } /* Маленький размер, не более 200px */
        .embedded-media.size-medium { width: 50%; max-width: 400px; } /* Средний размер, не более 400px */
        .embedded-media.size-large { width: 100%; } /* Большой размер, на всю ширину текстового блока */
        
        .reels-style { /* Специальный класс для вертикальных видео */
            max-width: 300px; /* Типичная ширина для таких видео */
            aspect-ratio: 9 / 16; /* Жестко задаем пропорции 9:16 */
            width: 50%; /* Ширина относительно контейнера, можно менять */
            height: auto; /* Высота рассчитается из пропорций */
        }
        .embedded-audio { /* Класс для встроенных аудио-плееров */
            width: 100%; /* Растягиваем плеер на всю ширину */
            margin: 15px 0; /* Добавляем вертикальные отступы */
        }
        /* После float-элементов нужно очищать поток, чтобы следующие блоки отображались корректно */
        .page p::after {
             content: "";
             display: table;
             clear: both;
        }
        /* <<< КОНЕЦ ИЗМЕНЕНИЙ >>> */

    </style> </head> <body> <div id="cover-view" class="content-view">
        <div id="tooltip-box"></div>
    </div>
    
    <div id="book-view" class="content-view">
        <div class="page-viewer"></div>
    </div>
    
    <div class="controls">
        <div id="main-title" class="controls-label"></div>
        <div class="controls-buttons">
            <div class="button-wrapper">
                <button id="prevBtn" class="nav-btn">◄</button> <span class="button-label">назад</span> </div>
            <div class="button-wrapper">
                <button id="playPauseBtn">▶</button> <span class="button-label">слушать</span> </div>
            <span id="pageIndicator"></span>
            <div class="button-wrapper">
                <button id="nextBtn" class="nav-btn">►</button> <span class="button-label">вперёд</span> </div>
            <div class="button-wrapper">
                <button id="bookingBtn" title="Бронировать">🛒</button> <span class="button-label">бронировать</span> </div>
        </div>
    </div>
    
    <div id="mediaModal" class="modal">
        <span class="modal-close">&times;</span> <div class="modal-header"></div> <div class="modal-content" id="modalText"></div> <img class="modal-content" id="modalPhoto" alt="Изображение"> <video class="modal-content" id="modalVideo" controls playsinline></video> <iframe class="modal-content" id="modalIframe" frameborder="0" allowfullscreen></iframe> <audio class="modal-content" id="modalAudio" controls></audio> <div class="modal-content" id="modalCarousel">
            <button class="carousel-nav prev">&lt;</button> <div id="carouselIframeWrapper"> <iframe src="" frameborder="0" allowfullscreen id="carouselIframe"></iframe>
            </div>
            <button class="carousel-nav next">&gt;</button> </div>
        
        <div class="modal-footer"></div> </div>

    <div id="bookingModal" class="modal">
        <div id="iframe-wrapper"> <span class="modal-close">&times;</span> <iframe id="bookingFrame" src="" title="Форма бронирования"></iframe> </div>
    </div>

    <audio id="narrationAudio" preload="auto"></audio>

    <script>
    // Событие, которое гарантирует, что весь HTML-код страницы загружен и готов к работе
    document.addEventListener('DOMContentLoaded', function() {
        
        // ===============================================================================================
        // ||                             ГЛАВНЫЙ ОБЪЕКТ НАСТРОЕК (CONFIG)                             ||
        // ===============================================================================================
        // Это "мозг" всей страницы. Весь контент и поведение настраиваются здесь.
        const CONFIG = {
            // --- ГЛОБАЛЬНЫЕ НАСТРОЙКИ ПОВЕДЕНИЯ ---
            
            isContinuousPlayback: true, 
            mobileFeedMode: true,
            feedModeForDesktop: true,

            // --- ОСНОВНОЙ КОНТЕНТ ---

            mainTitle: 'Маршрут 2. Дневной яхтенный тур под парусом Мармарис Яхт Марина-Кумлубюк с обедом на яхте.',
            audioUrl: 'https://raw.githubusercontent.com/znamenskiialeksei/marmarisyachting/main/2RouteAudioVasilisa.mp3',
            bookingUrl: 'https://script.google.com/macros/s/AKfycbw_zW9cCs6adluPNaVVm6spv16UwmQ4vAvvFSo5cenzsE8kpJnBAyktHy4zZaIeac_-VA/exec?page=route2',

            // --- НАСТРОЙКИ ОБЛОЖКИ (СТАРТОВОГО ЭКРАНА) ---

            coverVideoUrl: 'https://raw.githubusercontent.com/znamenskiialeksei/marmarisroute/main/VideoRoute/route-%D0%9C%D0%B0%D1%80%D1%88%D1%80%D1%83%D1%82%202.%20%D0%94%D0%BD%D0%B5%D0%B2%D0%BD%D0%BE%D0%B9%20%D1%8F%D1%85%D1%82%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9%20%D1%82%D1%83%D1%80%20%D0%BF%D0%BE%D0%B4%20%D0%BF%D0%B0%D1%80%D1%83%D1%81%D0%BE%D0%BC%20%D0%9C%D0%B0%D1%80%D0%BC%D0%B0%D1%80%D0%B8%D1%81%20%D0%AF%D1%85%D1%82%20%D0%9C%D0%B0%D1%80%D0%B8%D0%BD%D0%B0-%D0%9A%D1%8E%D0%BC%D0%BB%D1%8E%D0%B1%D1%8E%D0%BA%20%D1%81%20%D0%BE%D0%B1%D0%B5%D0%B4%D0%BE%D0%BC%20%D0%BD%D0%B0%20%D1%8F%D1%85%D1%82%D0%B5..mp4',
            coverVideoFitMode: 'cover',
            coverTexts: [ { text: 'Мармарис', tooltip: 'Возможно вы сейчас здесь....', top: '5%', left: '45%', visible: true } ],
            pulsingEffect: { enabled: true, fadeInDuration: 0.5, visibleDuration: 4.0, fadeOutDuration: 0.5, hiddenDuration: 3.0 },
            contactButtons: [
                { visible: true, pulsing: true, url: 'https://wa.me/905366140347?text=Здравствуйте!%20Интересует%20бронирование.', icon: '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="12" fill="#25D366"/><text x="12" y="16" font-size="10" text-anchor="middle" fill="white">WA</text></svg>', tooltip: 'Написать в WhatsApp', top: '90%', left: '15%' },
                { visible: true, pulsing: true, url: 'https://t.me/marmarisyachtingru?text=Здравствуйте!%20Интересует%20бронирование.', icon: '<svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="12" fill="#0088cc"/><text x="12" y="16" font-size="10" text-anchor="middle" fill="white">TG</text></svg>', tooltip: 'Написать в Telegram', top: '90%', left: '85%' }
            ],
            routeSelector: {
                visible: true,
                pulsing: false,
                icon: '<svg viewBox="0 0 90 40"><rect x="0.5" y="0.5" width="89" height="39" rx="8" fill="#36454F" stroke="#FFFFFF" stroke-width="1"/><text x="45" y="25" font-size="14" font-family="Arial, sans-serif" fill="white" font-weight="bold" text-anchor="middle">Маршруты</text></svg>',
                tooltip: 'Другие маршруты',
                top: '90%', left: '50%',
                routes: [
                    { name: 'Маршрут 1: Дневной тур Кумлубюк', url: 'https://www.marmarisyachting.ru/Yacht-Vasilisa-Catalog/Route1' },
                    { name: 'Маршрут 2: Дневной тур с обедом на яхте', url: 'https://www.marmarisyachting.ru/Yacht-Vasilisa-Catalog/Route2' },
                    { name: 'Маршрут 3: Дневной тур Чифтлик', url: 'https://www.marmarisyachting.ru/Yacht-Vasilisa-Catalog/Route3' },
                    { name: 'Бронировать тур', action: 'openBooking' },
                    { name: 'Календарь доступности', url: 'https://script.google.com/macros/s/AKfycbw_zW9cCs6adluPNaVVm6spv16UwmQ4vAvvFSo5cenzsE8kpJnBAyktHy4zZaIeac_-VA/exec?page=calendar', target: '_blank' },
                    { name: 'Недельная аренда виллы', url: 'https://www.marmarisyachting.ru/Villa-Turaman' }
                ]
            },

            // ===============================================================================================
            // ||                                 СТРАНИЦЫ С КОНТЕНТОМ                                      ||
            // ===============================================================================================
            pages: [
                {
                    published: true, 
                    collapsible: false,
                    customHeight: 'auto',
                    text: `<h2> О маршруте. </h2><p>Название: Маршрут 2. Дневной яхтенный тур под парусом Мармарис-Кумлубюк с обедом на яхте. Продолжительность: 1 день. Время: 9:30 – 18:15. Аудитория: от 1 до 6 гостей, включая детей от 6 лет. Стоимость: 1000 долларов США (стандартный обед)/1300 долларов США (обед-гриль). Особенности: Эксклюзивный однодневный круиз, сочетающий панорамные виды побережья, долгий отдых с купанием в живописной бухте Кумлубюк и изысканный обед, приготовленный для вас прямо на борту яхты.</p>`,
                    narrationEndTime: 40,
                    customDropdowns: [
                        {
                            visible: true, pulsing: true,
                            icon: '<svg viewBox="0 0 90 40"><rect x="0.5" y="0.5" width="89" height="39" rx="8" fill="#4CAF50" stroke="#FFFFFF" stroke-width="1"/><text x="45" y="25" font-size="14" font-family="Arial, sans-serif" fill="white" font-weight="bold" text-anchor="middle">Связаться</text></svg>',
                            tooltip: 'Напишите нам', top: '94%', left: '60%',
                            routes: [
                                { name: 'Написать в WhatsApp', url: 'https://wa.me/905366140347', target: '_blank' },
                                { name: 'Написать в Telegram', url: 'https://t.me/marmarisyachtingru', target: '_blank' }
                            ]
                        }
                    ]
                },
                {
                    published: true,
                    collapsible: true,
                    collapsedOnLoad: true,
                    customHeight: 'auto',
                    text: `<h2> Парусный день в Кумлубюк: Гастрономический круиз на яхте.</h2><p>Посвятите день абсолютному наслаждению: это эксклюзивный дневной тур, где живописные пейзажи Эгейского моря сочетаются с изысканным обедом, приготовленным специально для вас прямо на борту яхты. Идеальный сценарий для особого случая или просто идеального дня в море. Приглашаем вас на борт комфортабельной парусной яхты для путешествия к знаменитому пляжу Кумлубюк. Вас ждет неспешный круиз вдоль панорамных берегов, почти шесть часов отдыха в уединенной бухте с купанием и водными развлечениями, и кульминация дня — гастрономический обед в открытом море. Этот тур создан для небольшой компании от 1 до 6 человек. Мы стремимся подарить вам истинное удовольствие от яхтинга, поэтому при благоприятных погодных условиях мы обязательно совершим переход под парусами. А для самых ярких фотографий белоснежный парус будет поднят в любом случае.</p>`,
                    narrationEndTime: 101,
                },
                {
                    published: true,
                    collapsible: true,
                    collapsedOnLoad: false,
                    customHeight: 'auto',
                    text: `<h2> Программа путешествия: </h2><p>9:30 – Отправление и панорамный круиз Наше путешествие начнется из гавани Мармарис Яхт Марина. Следующие 90 минут мы посвятим неспешному переходу вдоль живописного побережья, наслаждаясь видами на Adakoy Marina, уединенные Козий и Вороний острова и знаменитый пляж Турунч. 11:00 – Отдых и обед в бухте Кумлубюк Мы бросим якорь в кристально чистых водах респектабельной бухты Кумлубюк почти на шесть часов. Это ваше время для полного расслабления: купайтесь, загорайте на палубе, исследуйте бухту на каяке или сап-борде. А мы позаботимся о вашем комфорте и гастрономических впечатлениях. Гастрономический опыт на борту. В течение дня мы будем рады предложить вам наш фирменный сервис: 11:30 — Приветственный чай, кофе и восточные сладости. 13:00 — Тарелка сочных сезонных фруктов для освежения. 14:30 — Комплексный обед (включен в стоимость 1000$): Салат "Чабан": Свежий микс из томатов черри, огурцов, перца и лука под заправкой из оливкового масла. Карбонара по-флотски: Классические спагетти Barilla №5 с пикантной говяжьей бастурмой, сливками, яйцом и настоящим сыром Parmigiano Reggiano. После обеда — чай, кофе и сладости. Обед-гриль (общая стоимость тура 1300$): Хотите сделать этот день еще более особенным? Выберите опцию с роскошным меню, приготовленным на гриле прямо на яхте: Сочные куриные крылья в соусе барбекю (300 гр.). Ароматный картофель в мундире на гриле (200 гр.). Шампиньоны на гриле (50 гр.). Свежий салат "Чабан" (150 гр.). 16:45 – Возвращение в Мармарис. Насладившись отдыхом, мы начинаем обратный 90-минутный переход в марину. Это прекрасное время, чтобы расслабиться на палубе и проводить солнце, окрашивающее береговую линию в золотые тона. 18:15 – Прибытие в Мармарис Яхт Марина.</p>`,
                    narrationEndTime: 240,
                },
                {
                    published: true,
                    collapsible: true,
                    collapsedOnLoad: false,
                    customHeight: 'auto',
                    text: `<h2> Важные детали и сервисы. </h2><p>Важные детали и сервисы. В стоимость тура включено: Аренда парусной яхты с капитаном. Комплексный обед или обед-гриль на борту (в зависимости от выбранного варианта). Чай, кофе, питьевая вода в течение всего дня. Фруктовая тарелка и сладости к чаю. Пользование надувным каяком, сап-бордом, надувной "ватрушкой" и масками для плавания. Подарите себе день идеального отдыха, где каждая деталь продумана для вашего удовольствия!</p>`,
                    narrationEndTime: 272,
                },
                {
                    published: true,
                    collapsible: true,
                    collapsedOnLoad: true,
                    customHeight: '550px',
                    text: `<h2>Фото и Видео о маршруте.</h2><p>К данной странице мы рекомендуем вам вернуться после завершения прослушивания и подробно ознакомиться с представленными фотографиями и видео о маршруте.</p>`,
                    narrationEndTime: 284,
                    mainVideo: { 
                        type: 'iframe', 
                        buttonText: 'Видео о Марине',
                        buttonColor: '#FF5722',
                        buttonTextColor: '#FFFFFF',
                        url: 'https://1drv.ms/v/c/2919ff56cb24dc70/IQSe6WT-_Nt4QYem_P3qEx_3Abn7W0p9009H02uPVTxShdI', 
                        headerText: 'Видео: Выход из Мармарис Яхт Марины', 
                        footerText: '' 
                    },
                    extraMedia: [
                        {
                            type: 'carousel',
                            buttonText: 'Галерея', 
                            buttonColor: '#E91E63',
                            buttonTextColor: '#FFFFFF',
                            headerText: 'Фотографии',
                            images: [
                                { url: 'https://1drv.ms/i/c/2919ff56cb24dc70/IQS4SlSP1EukT49NhIfzIy6sAcsaeHHgAgI8L_4fZWN5eek?action=embedview', caption: 'BAVARIA C45 - Фото 1', width: 1513, height: 951 },
                                { url: 'https://1drv.ms/i/c/2919ff56cb24dc70/IQS4SlSP1EukT49NhIfzIy6sAcsaeHHgAgI8L_4fZWN5eek?action=embedview', caption: 'BAVARIA C45 - Фото 2', width: 1513, height: 951 },
                                { url: 'https://1drv.ms/i/c/2919ff56cb24dc70/IQS4SlSP1EukT49NhIfzIy6sAcsaeHHgAgI8L_4fZWN5eek?action=embedview', caption: 'BAVARIA C45 - Фото 3', width: 1513, height: 951 },
                                { url: 'https://1drv.ms/i/c/2919ff56cb24dc70/IQS4SlSP1EukT49NhIfzIy6sAcsaeHHgAgI8L_4fZWN5eek?action=embedview', caption: 'BAVARIA C45 - Фото 4', width: 1513, height: 951 },
                                { url: 'https://1drv.ms/i/c/2919ff56cb24dc70/IQS4SlSP1EukT49NhIfzIy6sAcsaeHHgAgI8L_4fZWN5eek?action=embedview', caption: 'BAVARIA C45 - Фото 5', width: 1513, height: 951 }
                            ]
                        },
                        { 
                            type: 'iframe', 
                            buttonText: 'Видеообзор',
                            buttonColor: '#00BCD4',
                            url: 'https://1drv.ms/v/c/2919ff56cb24dc70/IQRmfHoOiJ0USI41R15PiRxPAS3q42tuZDyBnREAIy_J2-0', 
                            headerText: 'Кумлюбюк', 
                            footerText: '' 
                        }
                    ],
                },
                {
                    published: true,
                    collapsible: true,
                    collapsedOnLoad: true,
                    customHeight: 'auto',
                    text: `<h2> О яхте Bavaria C45. </h2><p>Яхта произведена. ..</p>`,
                    narrationEndTime: 439,
                    mainVideo: { 
                        type: 'video',
                        buttonText: 'Обзор Яхты',
                        buttonColor: '#8BC34A',
                        buttonTextColor: '#212121',
                        url: 'https://www.youtube.com/embed/Dp2g78eqw18', 
                        headerText: 'Видео: Bavaria C45 - яхта для вашего путешествия', 
                        footerText: 'BAVARIA C45 на площади более 60 м² организовано уютное пространство для путешествий.' 
                    },
                    extraMedia: [
                        {
                            type: 'carousel',
                            buttonText: 'Фото Яхты',
                            headerText: 'Фотографии BAVARIA C45',
                            images: [
                                { url: 'https://1drv.ms/i/c/2919ff56cb24dc70/IQTt0pbjcDOaQ4EzOYUnlLjFAcFIzWiG_6RGa8MxNqsnAE8?action=embedview', caption: 'BAVARIA C45- Фото 1', width: 931, height: 616 },
                                { url: 'https://1drv.ms/i/c/2919ff56cb24dc70/IQSyu_NPfwz-Q7vkjqlgRWihAQq3NPmk8Zii_vvq84r6MCY?action=embedview', caption: 'BAVARIA C45 - Фото 2', width: 1155, height: 707 },
                                { url: 'https://1drv.ms/i/c/2919ff56cb24dc70/IQSb6bzlT7ajSY3Vab9F66BoARTPNHSaB2JzYE_nQOKkzrI?action=embedview', caption: 'BAVARIA C45 - Фото 3', width: 930, height: 608 },
                                { url: 'https://1drv.ms/i/c/2919ff56cb24dc70/IQRlrsLTzjuKSqCYH3WZKC9YAQVRQHT_n24533Iaa3eBS9I?action=embedview', caption: 'BAVARIA C45 - Фото 4', width: 1056, height: 836 },
                                { url: 'https://1drv.ms/i/c/2919ff56cb24dc70/IQST2enSQDURTKzus8inBLBFAXMJKUZCryc5LEUuQlwl9bo?action=embedview', caption: 'BAVARIA C45 - Фото 5', width: 1132, height: 685 }
                            ]
                        },
                        { 
                            type: 'blokiframe', 
                            buttonText: 'Видео с Google Drive',
                            buttonColor: '#26A69A',
                            iframeCode: '<iframe src="https://drive.google.com/file/d/11TDsKfDIg_GD27Lml0Pow-4fsUrIV3LO/preview" width="640" height="480" allow="autoplay"></iframe>',
                            headerText: 'Пример видео с Google Drive', 
                            footerText: '' 
                        },
                        { type: 'iframe', buttonText: '360° тур по яхте', url: 'https://360.bavariayachts.com/2021/tours/index_en.html?nav_id=5491-135719', headerText: '360° тур по яхте', footerText: '' },
                        { type: 'iframe', buttonText: 'Видеообзор яхты', url: 'https://1drv.ms/v/c/2919ff56cb24dc70/IQRmfHoOiJ0USI41R15PiRxPAS3q42tuZDyBnREAIy_J2-0', headerText: 'Видеообзор яхты', footerText: '' }
                    ],
                },
                
                // ===============================================================================================
                // ||                  СТРАНИЦА-ШАБЛОН С МАКСИМАЛЬНЫМ КОЛИЧЕСТВОМ ПРИМЕРОВ                     ||
                // ===============================================================================================
                { 
                    published: true, // Включаем страницу, чтобы видеть результат
                    collapsible: true, // Делаем блок сворачиваемым в режиме "Ленты"
                    collapsedOnLoad: false, // При загрузке блок будет развернут
                    narrationEndTime: 510, // Устанавливаем время окончания озвучки для этого блока
                    
                    // <<< НАЧАЛО ИЗМЕНЕНИЙ: Полностью переработанный блок `text` с примерами встраивания медиа >>>
                    text: `<h2>Шаблон: Встраивание медиа и форматирование</h2>
                           <p>Эта страница демонстрирует, как встраивать различный медиаконтент прямо в текст, используя HTML-теги и специальные CSS-классы.</p>
                           
                           <hr>
                           <h3>1. Встраивание изображений (<img>)</h3>
                           <p>Вы можете вставить изображение по прямой ссылке. Используйте класс <code>embedded-media</code> для базовых стилей.</p>
                           <img src="https://raw.githubusercontent.com/znamenskiialeksei/my-audiobook-foto/main/%D1%801.png" alt="Пример изображения" class="embedded-media size-medium">
                           
                           <p>
                             <img src="https://raw.githubusercontent.com/znamenskiialeksei/my-audiobook-foto/main/%D1%801.png" alt="среднее" class="embedded-media size-medium align-left">
                             Этот текст будет обтекать изображение, расположенное слева. Классы <code>align-left</code> и <code>size-small</code> позволяют создавать такие компактные компоновки. Текст продолжается, заполняя свободное пространство справа от картинки. Это удобно для иллюстрации отдельных моментов в повествовании без разрыва основного текста.
                           </p>
                           <p>А этот текст начнется после того, как закончится обтекание.</p>

                           <hr>
                           <h3>2. Встраивание видео. </h3>
                           <p>Можно вставлять видео как по прямой ссылке на файл .mp4, так и через iframe с видеохостингов.</p>
                           <iframe src src="https://drive.google.com/file/d/11TDsKfDIg_GD27Lml0Pow-4fsUrIV3LO/preview" class="embedded-media"></iframe>

                           <hr>
                           <p>Для вертикальных видео используйте класс <code>reels-style</code>.</p>
                           <iframe src="https://www.youtube.com/embed/Dp2g78eqw18" class="embedded-media reels-style" allowfullscreen></iframe>
                           
                           <hr>
                           <h3>3. Встраивание аудио.</h3>
                           <p>Вы можете добавить аудиоплеер прямо в текст. Используйте класс <code>embedded-audio</code>.</p>
                           <audio controls src="https://raw.githubusercontent.com/znamenskiialeksei/my-audiobook/main/%D0%A2%D0%B5%D0%BA%D1%81%D1%82%20%D0%9F%D0%BB%D0%B0%D1%81%D1%82%D0%B8%D0%BB%D0%B8%D0%BD%D0%BE%D0%B2%D0%B0%D1%8F%20%D1%8F%D1%85%D1%82%D0%B0%20%D0%BC%D0%BD%D0%BE%D0%B3%D0%BE%D0%B3%D0%BE%D0%BB%D0%BE%D1%81%D1%8B%D0%B924.mp3" class="embedded-audio"></audio>
                           <p>Это позволяет вставлять фоновую музыку, звуковые эффекты или дополнительные аудио-комментарии.</p>
                           `,
                    // <<< КОНЕЦ ИЗМЕНЕНИЙ >>>
                },
            ]
        };

        // --- НАЧАЛО ОСНОВНОЙ ЛОГИКИ СКРИПТА ---

        const isMobile = window.innerWidth < 768; // Проверяем, является ли устройство мобильным по ширине экрана
        const isFeedMode = (isMobile && CONFIG.mobileFeedMode) || (!isMobile && CONFIG.feedModeForDesktop); // Определяем, нужно ли включать режим "Ленты"
        if (isFeedMode) { // Если да,
            document.body.classList.add('feed-mode'); // добавляем к body соответствующий класс
        }

        const isAdmin = new URLSearchParams(window.location.search).get('admin') === 'true'; // Проверяем наличие ?admin=true в URL для включения режима отладки
        const adminErrors = []; // Массив для сбора ошибок конфигурации
        const publishedPages = CONFIG.pages.filter(p => p.published); // Создаем массив только из опубликованных страниц
        const coverView = document.getElementById('cover-view'); // Находим DOM-элемент обложки
        const bookView = document.getElementById('book-view'); // Находим DOM-элемент "книги"
        const audioPlayer = document.getElementById('narrationAudio'); // Находим DOM-элемент аудио-плеера
        const playPauseBtn = document.getElementById('playPauseBtn'); // Находим кнопку Play/Pause
        const nextBtn = document.getElementById('nextBtn'); // Находим кнопку "вперед"
        const prevBtn = document.getElementById('prevBtn'); // Находим кнопку "назад"
        const pageIndicator = document.getElementById('pageIndicator'); // Находим индикатор страниц
        
        // --- Переменные для отслеживания состояния ---
        let currentPage = 1; // Номер текущей страницы
        let isPlaying = false; // Флаг, играет ли сейчас аудио
        let isCoverActive = true; // Флаг, активна ли сейчас обложка
        let isNarratorModeActive = false; // Флаг для управления гибридным режимом "Ленты"
        
        let tooltipTimeout = null; // Переменная для таймера подсказки

        if (CONFIG.pulsingEffect && CONFIG.pulsingEffect.enabled) {
            const effect = CONFIG.pulsingEffect;
            const totalDuration = effect.fadeInDuration + effect.visibleDuration + effect.fadeOutDuration + effect.hiddenDuration;
            const fadeInEnd = (effect.fadeInDuration / totalDuration) * 100;
            const visibleEnd = ((effect.fadeInDuration + effect.visibleDuration) / totalDuration) * 100;
            const fadeOutEnd = ((effect.fadeInDuration + effect.visibleDuration + effect.fadeOutDuration) / totalDuration) * 100;
            const styleSheet = document.createElement("style");
            styleSheet.innerText = `@keyframes pulseAnimation { 0% { opacity: 0; } ${fadeInEnd}% { opacity: 1; } ${visibleEnd}% { opacity: 1; } ${fadeOutEnd}% { opacity: 0; } 100% { opacity: 0; } }`;
            document.head.appendChild(styleSheet);
            document.documentElement.style.setProperty('--pulse-total-duration', `${totalDuration}s`);
        }
        
        function createDropdownButton(config, parentElement) {
            if (!config || !config.visible) return;
            const menuBtn = document.createElement('button');
            menuBtn.className = 'cover-button route-selector-btn';
            
            menuBtn.style.top = config.top;
            menuBtn.style.left = config.left;
            menuBtn.innerHTML = config.icon;
            
            menuBtn.addEventListener('mouseenter', (e) => showTooltip(e.currentTarget, config.tooltip));
            menuBtn.addEventListener('mouseleave', hideTooltip);

            if ((CONFIG.pulsingEffect?.enabled && config.pulsing !== false) || config.pulsing === true) {
                menuBtn.classList.add('pulsing');
            }
            const dropdown = document.createElement('div');
            dropdown.className = 'route-dropdown-menu';

            config.routes.forEach(route => {
                const link = document.createElement('a');
                link.textContent = route.name;

                if (route.action === 'openBooking') {
                    link.href = '#';
                    link.onclick = (e) => {
                        e.preventDefault();
                        openBookingModal();
                        dropdown.classList.remove('visible');
                    };
                } else {
                    link.href = route.url;
                    if (route.target) {
                        link.target = route.target;
                        link.rel = 'noopener noreferrer';
                    }
                }
                dropdown.appendChild(link);
            });
            
            parentElement.appendChild(menuBtn);
            document.body.appendChild(dropdown);

            menuBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                
                const rect = menuBtn.getBoundingClientRect();
                const offset = 5;
                const centerPullFactor = 0.25; 

                const buttonCenterX = rect.left + rect.width / 2;
                const screenCenterX = window.innerWidth / 2;
                
                const newLeft = buttonCenterX + (screenCenterX - buttonCenterX) * centerPullFactor;

                if (rect.top < window.innerHeight / 2) {
                    dropdown.style.top = `${rect.bottom + offset}px`;
                    dropdown.style.transform = 'translate(-50%, 0)';
                    dropdown.style.transformOrigin = 'top center';
                } else {
                    dropdown.style.top = `${rect.top - offset}px`;
                    dropdown.style.transform = 'translate(-50%, -100%)';
                    dropdown.style.transformOrigin = 'bottom center';
                }
                
                dropdown.style.left = `${newLeft}px`;

                document.querySelectorAll('.route-dropdown-menu.visible').forEach(menu => {
                    if (menu !== dropdown) menu.classList.remove('visible');
                });
                dropdown.classList.toggle('visible');
            });
            document.addEventListener('click', (e) => {
                if (!dropdown.contains(e.target) && !menuBtn.contains(e.target)) {
                    dropdown.classList.remove('visible');
                }
            });
        }
        
        const tooltipBox = document.getElementById('tooltip-box');

        function showTooltip(element, text) {
            if (!text) return;
            clearTimeout(tooltipTimeout);

            tooltipBox.textContent = text;
            const rect = element.getBoundingClientRect();
            const offset = 5;
            const centerPullFactor = 0.25;

            const buttonCenterX = rect.left + rect.width / 2;
            const screenCenterX = window.innerWidth / 2;
            
            const newLeft = buttonCenterX + (screenCenterX - buttonCenterX) * centerPullFactor;

            if (rect.top < window.innerHeight / 2) {
                tooltipBox.style.top = `${rect.bottom + offset}px`;
                tooltipBox.style.transform = 'translate(-50%, 0)';
            } else {
                tooltipBox.style.top = `${rect.top - offset}px`;
                tooltipBox.style.transform = 'translate(-50%, -100%)';
            }
            
            tooltipBox.style.left = `${newLeft}px`;
            
            tooltipBox.classList.add('visible');

            if (isMobile) {
                tooltipTimeout = setTimeout(hideTooltip, 2000);
            }
        }

        function hideTooltip() {
            clearTimeout(tooltipTimeout);
            tooltipBox.classList.remove('visible');
        }

        function setupCover() {
            document.querySelector('#main-title').textContent = CONFIG.mainTitle;
            if (CONFIG.audioUrl) audioPlayer.src = CONFIG.audioUrl;
            else if(isAdmin) adminErrors.push('Не указан URL для основного аудио');
            if (CONFIG.coverVideoUrl) {
                const video = document.createElement('video');
                video.id = 'cover-video';
                video.src = CONFIG.coverVideoUrl;
                video.autoplay = true;
                video.loop = true;
                video.muted = true;
                video.playsInline = true;
                video.style.objectFit = CONFIG.coverVideoFitMode || 'cover';
                coverView.prepend(video);
            } else if (isAdmin) {
                adminErrors.push('Не указан URL для видео на обложке');
            }
            
            CONFIG.coverTexts.forEach((item) => {
                if (item.visible !== false) {
                    const textBox = document.createElement('div');
                    textBox.className = 'cover-text-box';
                    textBox.style.top = item.top;
                    textBox.style.left = item.left;
                    const textBg = document.createElement('span');
                    textBg.className = 'cover-text-bg';
                    textBg.textContent = item.text;
                    textBox.appendChild(textBg);
                    textBox.addEventListener('mouseenter', (e) => showTooltip(e.currentTarget, item.tooltip)); 
                    textBox.addEventListener('mouseleave', hideTooltip);
                    coverView.appendChild(textBox);
                }
            });
            if (CONFIG.contactButtons) {
                CONFIG.contactButtons.forEach(btnData => {
                    if (btnData.visible && btnData.url) {
                        const contactBtn = document.createElement('a');
                        contactBtn.href = btnData.url;
                        contactBtn.className = 'cover-button';
                        contactBtn.target = '_blank';
                        contactBtn.rel = 'noopener noreferrer';
                        contactBtn.style.top = btnData.top;
                        contactBtn.style.left = btnData.left;
                        contactBtn.innerHTML = btnData.icon;
                        contactBtn.addEventListener('mouseenter', (e) => showTooltip(e.currentTarget, btnData.tooltip));
                        contactBtn.addEventListener('mouseleave', hideTooltip);
                        if ((CONFIG.pulsingEffect?.enabled && btnData.pulsing !== false) || btnData.pulsing === true) {
                            contactBtn.classList.add('pulsing');
                        }
                        coverView.appendChild(contactBtn);
                    }
                });
            }
            
            if (CONFIG.routeSelector) {
                createDropdownButton(CONFIG.routeSelector, coverView);
            }
        }
        
        function setupBookPages() {
            const pageViewer = document.querySelector('.page-viewer');
            pageViewer.innerHTML = '';
            publishedPages.forEach((pageData, index) => {
                const pageNum = index + 1;
                const page = document.createElement('div');
                page.className = 'page';
                page.dataset.pageNumber = pageNum;
                if (pageNum === 1) page.classList.add('active');
                
                const buttonsContainer = document.createElement('div');
                buttonsContainer.className = 'page-buttons-container';
                
                const allMedia = []; 
                if (pageData.mainVideo && pageData.mainVideo.url) { 
                    const mainVideoButtonConfig = { 
                        ...pageData.mainVideo, 
                        type: pageData.mainVideo.type || 'video', 
                        buttonText: pageData.mainVideo.buttonText || 'Показать видео' 
                    };
                    allMedia.push(mainVideoButtonConfig);
                } 
                if (pageData.extraMedia) { 
                    allMedia.push(...pageData.extraMedia); 
                } 
                
                allMedia.forEach((media) => {
                    const hasUrl = (media.type === 'carousel' && media.images && media.images.length > 0) ||
                                   (media.url && media.url.trim() !== '') ||
                                   (media.type === 'blokiframe' && media.iframeCode && media.iframeCode.trim() !== '');

                    if (hasUrl) { 
                        const btn = document.createElement('button');
                        const btnClass = (media.type === 'iframe' || media.type === 'blokiframe') ? 'iframe-btn' : `${media.type}-btn`;
                        btn.className = `page-btn ${btnClass}`;
                        btn.textContent = media.buttonText; 

                        if (media.buttonColor) btn.style.backgroundColor = media.buttonColor;
                        if (media.buttonTextColor) btn.style.color = media.buttonTextColor;

                        btn.onclick = () => openMediaModal(media); 
                        buttonsContainer.appendChild(btn); 
                    } else if (isAdmin) { 
                        const errorMsg = `Стр. ${pageNum}, кнопка "${media.buttonText}": URL или данные отсутствуют`; 
                        adminErrors.push(errorMsg); 
                        const errorBtn = document.createElement('button'); 
                        errorBtn.className = 'page-btn admin-error-btn'; 
                        errorBtn.textContent = 'ОШИБКА URL'; 
                        errorBtn.title = errorMsg; 
                        buttonsContainer.appendChild(errorBtn); 
                    }
                }); 
                
                const textContent = document.createElement('p');
                textContent.innerHTML = pageData.text || '';
                
                if (isFeedMode && pageData.collapsible) {
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = pageData.text;
                    const h2 = tempDiv.querySelector('h2');
                    const title = h2 ? h2.innerHTML : 'Развернуть';
                    if (h2) h2.remove();
                    textContent.innerHTML = tempDiv.innerHTML;
                    const details = document.createElement('details');
                    details.open = !pageData.collapsedOnLoad; 
                    
                    if (pageData.customHeight && pageData.customHeight !== 'auto') {
                        page.style.height = details.open ? pageData.customHeight : 'auto';
                    }

                    details.addEventListener('toggle', () => {
                        if (pageData.customHeight && pageData.customHeight !== 'auto') {
                            page.style.height = details.open ? pageData.customHeight : 'auto';
                        }
                        
                        if (details.open) {
                            const pageNumToSync = parseInt(page.dataset.pageNumber, 10);
                            currentPage = pageNumToSync;
                            const wasPlaying = isPlaying;
                            audioPlayer.currentTime = getPageStartTime(pageNumToSync);
                            if (wasPlaying) {
                                audioPlayer.play();
                            }
                        }
                    });

                    const summary = document.createElement('summary');
                    summary.innerHTML = title;
                    details.appendChild(summary);
                    details.appendChild(buttonsContainer);
                    details.appendChild(textContent);
                    page.appendChild(details);
                } else { 
                    if (pageData.customHeight) {
                        page.style.height = pageData.customHeight;
                    }
                    page.appendChild(buttonsContainer); 
                    page.appendChild(textContent); 
                }
                
                pageViewer.appendChild(page);
                
                if (pageData.customDropdowns && Array.isArray(pageData.customDropdowns)) {
                    pageData.customDropdowns.forEach(dropdownConfig => {
                        createDropdownButton(dropdownConfig, page);
                    });
                }
            });
        }
        
        function updateAdminPanel() {
            if (isAdmin && adminErrors.length > 0) { let panel = document.getElementById('admin-panel'); if (!panel) { panel = document.createElement('div'); panel.id = 'admin-panel'; document.body.appendChild(panel); } let errorList = '<h4>Обнаружены ошибки конфигурации:</h4><ul>'; adminErrors.forEach(err => { errorList += `<li>${err}</li>`; }); errorList += '</ul>'; panel.innerHTML = errorList; }
        }
        
        const mediaModal = document.getElementById('mediaModal'); const modalPhoto = document.getElementById('modalPhoto'); const modalVideo = document.getElementById('modalVideo'); const modalAudio = document.getElementById('modalAudio'); const modalText = document.getElementById('modalText'); const modalCarousel = document.getElementById('modalCarousel'); const modalIframe = document.getElementById('modalIframe'); const carouselPrevBtn = modalCarousel.querySelector('.prev'); const carouselNextBtn = modalCarousel.querySelector('.next'); let currentCarouselImages = []; let currentCarouselIndex = 0;

        function openMediaModal(media) {
            [modalPhoto, modalVideo, modalAudio, modalText, modalCarousel, modalIframe].forEach(el => { el.style.display = 'none'; if(el.tagName === 'VIDEO' || el.tagName === 'AUDIO') { el.src = ''; el.pause(); } else if (el.tagName === 'IMG' || el.tagName === 'IFRAME') { el.src = 'about:blank'; } });
            mediaModal.querySelector('.modal-header').textContent = media.headerText || '';
            mediaModal.querySelector('.modal-footer').textContent = ''; 
            if (media.type === 'carousel' && media.images && media.images.length > 0) {
                currentCarouselImages = media.images; currentCarouselIndex = 0;
                function showCarouselSlide(index) {
                    const wrapper = document.getElementById('carouselIframeWrapper'); const iframe = document.getElementById('carouselIframe'); const slideData = currentCarouselImages[index]; if (!slideData || !slideData.url || !slideData.width || !slideData.height) { iframe.src = 'about:blank'; return; } const containerWidth = wrapper.clientWidth; const containerHeight = wrapper.clientHeight; iframe.width = slideData.width; iframe.height = slideData.height; const scaleX = containerWidth / slideData.width; const scaleY = containerHeight / slideData.height; const scale = Math.min(scaleX, scaleY); iframe.style.transform = `scale(${scale})`; iframe.src = slideData.url; mediaModal.querySelector('.modal-footer').textContent = slideData.caption || ''; carouselPrevBtn.style.visibility = (index === 0) ? 'hidden' : 'visible'; carouselNextBtn.style.visibility = (index === currentCarouselImages.length - 1) ? 'hidden' : 'visible';
                }
                carouselPrevBtn.onclick = () => { if (currentCarouselIndex > 0) { currentCarouselIndex--; showCarouselSlide(currentCarouselIndex); } };
                carouselNextBtn.onclick = () => { if (currentCarouselIndex < currentCarouselImages.length - 1) { currentCarouselIndex++; showCarouselSlide(currentCarouselIndex); } };
                modalCarousel.style.display = 'flex'; setTimeout(() => { showCarouselSlide(0); }, 50);
            } else {
                mediaModal.querySelector('.modal-footer').textContent = media.footerText || ''; let contentElement;
                if (media.type === 'iframe') { 
                    if (media.width && media.height) { modalIframe.style.aspectRatio = `${media.width} / ${media.height}`; modalIframe.style.width = 'auto'; modalIframe.style.height = 'auto'; } else { modalIframe.style.aspectRatio = '16 / 9'; modalIframe.style.width = '90%'; modalIframe.style.height = '80%'; }
                    modalIframe.src = media.url;
                    modalIframe.style.display = 'block';
                } else if (media.type === 'blokiframe') {
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = media.iframeCode.trim();
                    const tempIframe = tempDiv.firstChild; 
                    if (tempIframe && tempIframe.tagName === 'IFRAME' && tempIframe.src) {
                        modalIframe.style.aspectRatio = '16 / 9';
                        modalIframe.style.width = '90%';
                        modalIframe.style.height = 'auto';
                        modalIframe.src = tempIframe.src;
                        modalIframe.style.display = 'block';
                    } else if (isAdmin) {
                        alert('Ошибка в коде для blokiframe: ' + media.iframeCode);
                    }
                } else if (media.type === 'photo') {
                    contentElement = modalPhoto;
                } else if (media.type === 'video') {
                    if (media.url.includes('youtu.be') || media.url.includes('youtube.com')) {
                        const videoId = media.url.split('v=')[1] || media.url.split('/').pop().split('?')[0];
                        const embedUrl = `https://www.youtube.com/embed/${videoId}`;
                        modalIframe.style.aspectRatio = '16 / 9';
                        modalIframe.style.width = '90%';
                        modalIframe.style.height = 'auto';
                        modalIframe.src = embedUrl;
                        modalIframe.style.display = 'block';
                    } else {
                        contentElement = modalVideo;
                    }
                } else if (media.type === 'audio') {
                    contentElement = modalAudio;
                } else if (media.type === 'text') {
                    contentElement = modalText;
                }
                
                if (contentElement) {
                    if (media.type === 'text') {
                        contentElement.innerHTML = '<em>Загрузка...</em>';
                        fetch(media.url).then(res => res.text()).then(text => contentElement.innerHTML = text).catch(err => contentElement.innerHTML = '<strong>Ошибка загрузки.</strong>');
                    } else {
                        contentElement.src = media.url;
                    }
                    contentElement.style.display = 'block';
                    if ((media.type === 'video' || media.type === 'audio')) {
                        contentElement.play();
                    }
                }
            }
            mediaModal.style.display = 'flex';
        }
        const bookingModal = document.getElementById('bookingModal'); const bookingFrame = document.getElementById('bookingFrame');
        
        function closeModal(modal) { modal.style.display = 'none'; if (modal.id === 'mediaModal') { [modalPhoto, modalVideo, modalAudio, modalText, modalCarousel, modalIframe].forEach(el => { el.style.display = 'none'; if (el.tagName === 'VIDEO' || el.tagName === 'AUDIO') { el.pause(); el.src = ''; } else if (el.tagName === 'IMG' || el.tagName === 'IFRAME') { el.src = 'about:blank'; } }); } if (modal.id === 'bookingModal') { bookingFrame.src = ''; } }
        mediaModal.querySelector('.modal-close').onclick = () => closeModal(mediaModal);
        bookingModal.querySelector('.modal-close').onclick = () => closeModal(bookingModal);
        
        function openBookingModal() {
            if (!CONFIG.bookingUrl && isAdmin) { 
                alert('URL формы бронирования не указан в CONFIG'); 
                return; 
            }
            document.getElementById('iframe-wrapper').style.height = '90vh';
            bookingFrame.src = CONFIG.bookingUrl;
            bookingModal.style.display = 'flex';
        }

        document.getElementById('bookingBtn').onclick = openBookingModal;

        window.addEventListener('message', function(event) { if (event.data && event.data.type === 'formHeight') { const wrapper = document.getElementById('iframe-wrapper'); const padding = parseInt(getComputedStyle(wrapper).paddingTop) * 2; wrapper.style.height = (event.data.height + padding + 5) + 'px'; } });
        
        function showPage(pageNumber) {
            if (pageNumber < 1 || pageNumber > publishedPages.length) return;
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelector(`.page[data-page-number="${pageNumber}"]`).classList.add('active');
            currentPage = pageNumber;
            updateButtonsAndIndicator();
        }

        function updateButtonsAndIndicator() {
            if (!isFeedMode) {
                prevBtn.parentElement.style.display = isCoverActive ? 'none' : 'flex';
                pageIndicator.textContent = isCoverActive ? `0 / ${publishedPages.length}` : `${currentPage} / ${publishedPages.length}`;
            }
        }

        function getPageStartTime(pageNumber) {
            if (pageNumber <= 1) return 0;
            return publishedPages[pageNumber - 2].narrationEndTime;
        }

        function scrollToPage(pageNum) {
            const targetPage = document.querySelector(`.page[data-page-number="${pageNum}"]`);
            if (targetPage) {
                targetPage.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        playPauseBtn.addEventListener('click', () => {
            if (isFeedMode && isCoverActive) {
                if (isFeedMode) isNarratorModeActive = true;
                isCoverActive = false;
                scrollToPage(1);
                const firstPage = document.querySelector('.page[data-page-number="1"] details');
                if (firstPage && !firstPage.open) {
                    firstPage.open = true;
                }
                audioPlayer.currentTime = 0; 
                audioPlayer.play();
            } else if (!isFeedMode && isCoverActive) {
                coverView.style.display = 'none';
                bookView.style.display = 'flex';
                isCoverActive = false;
                showPage(1);
                audioPlayer.currentTime = 0;
                audioPlayer.play();
            } else {
                if (isPlaying) {
                    audioPlayer.pause();
                    if (isFeedMode) isNarratorModeActive = false;
                } else {
                    audioPlayer.play();
                    if (isFeedMode) isNarratorModeActive = true;
                }
            }
        });

        audioPlayer.onplaying = () => { isPlaying = true; playPauseBtn.textContent = '❚❚'; };
        audioPlayer.onpause = () => { isPlaying = false; playPauseBtn.textContent = '▶'; };
        
        audioPlayer.onended = () => {
            isPlaying = false; playPauseBtn.textContent = '▶';
            if (isFeedMode) {
                isNarratorModeActive = false;
                const lastPage = document.querySelector(`.page[data-page-number="${currentPage}"] details`);
                if (lastPage) lastPage.open = false;
                document.getElementById('cover-view').scrollIntoView({ behavior: 'smooth', block: 'start' });
                isCoverActive = true; currentPage = 1;
            } else {
                showPage(1);
            }
        };

        nextBtn.addEventListener('click', () => {
            if (!isFeedMode) {
                if (isCoverActive) { coverView.style.display = 'none'; bookView.style.display = 'flex'; isCoverActive = false; showPage(1); } else if (currentPage < publishedPages.length) { const nextPage = currentPage + 1; showPage(nextPage); audioPlayer.currentTime = getPageStartTime(nextPage); }
            }
        });
        prevBtn.addEventListener('click', () => {
            if (!isFeedMode) {
                if (isCoverActive) return;
                if (currentPage > 1) { const prevPage = currentPage - 1; showPage(prevPage); audioPlayer.currentTime = getPageStartTime(prevPage); } else { bookView.style.display = 'none'; coverView.style.display = 'flex'; isCoverActive = true; audioPlayer.pause(); updateButtonsAndIndicator(); }
            }
        });

        audioPlayer.addEventListener('timeupdate', () => {
            if (isCoverActive) return;

            const isAutoPilot = (isFeedMode && isNarratorModeActive) || (!isFeedMode && CONFIG.isContinuousPlayback);

            if (isAutoPilot && isPlaying) {
                const currentTime = audioPlayer.currentTime;
                const targetPageData = publishedPages.find((p, index) => {
                    const startTime = getPageStartTime(index + 1);
                    return currentTime >= startTime && currentTime < p.narrationEndTime;
                });
                
                if (!targetPageData) return;
                
                const newPageNum = publishedPages.indexOf(targetPageData) + 1;
                
                if (isFeedMode) {
                    if (newPageNum !== currentPage) {
                        const prevPageDetails = document.querySelector(`.page[data-page-number="${currentPage}"] details`);
                        if (prevPageDetails && prevPageDetails.open) prevPageDetails.open = false;
                        const newPageDetails = document.querySelector(`.page[data-page-number="${newPageNum}"] details`);
                        if (newPageDetails && !newPageDetails.open) newPageDetails.open = true;
                        scrollToPage(newPageNum); 
                        currentPage = newPageNum;
                    }
                } else {
                    if (newPageNum !== currentPage) {
                        showPage(newPageNum);
                    }
                }
            }
        });

        setupCover();
        setupBookPages();
        updateAdminPanel();
        updateButtonsAndIndicator();
        
        if (isFeedMode) {
            if (prevBtn) prevBtn.parentElement.style.display = 'none';
            if (nextBtn) nextBtn.parentElement.style.display = 'none';
            if (pageIndicator) pageIndicator.style.display = 'none';
        }
    });
    </script> </body> </html> ```






























































































































